# 口头对战游戏 - 项目上下文

> 这是一个30天游戏开发项目，目标是在2026-03-01发布1.0版本

---

## ⚠️ 优先级规则（最高）

1. **称呼规则**：每次回复前必须使用"Boss"作为称呼
2. **决策确认**：遇到不确定的代码设计问题时，必须先询问 Boss，不得直接行动
3. **代码开发管理**：所有涉及开发代码的任务，一律使用 git 和 worktree 进行开发管理

---

## 项目简介

将用户童年和伙伴们玩的口头对战游戏做成一个带有动画素材的程序。

**核心玩法**: 回合制多人对战，2-8人，策略博弈为核心体验。

---

## 关键决策（已确定）

| 项目 | 决策 |
|------|------|
| 角色数量 | 3个（骑士、装甲战士、弓箭手） |
| 发布平台 | Web网页版 |
| 美术风格 | 像素风（梦幻西游界面+曹操传精美度） |
| 素材方案 | PixelLab（MCP集成）+ Aseprite（后期编辑） |
| 开发框架 | PixiJS |
| 分工模式 | 用户=产品经理，Claude=执行者 |
| 预算 | 1000-2000元 |
| 每日投入 | 1-2小时 |

---

## 用户背景

- 无开发经验
- 无美术经验
- 希望绝大部分工作由AI工具/agent完成
- 用户角色：审核、选择、决策、测试

---

## 核心文档

| 文档 | 路径 | 说明 |
|------|------|------|
| 游戏逻辑PRD | `docs/GAME_LOGIC_PRD.md` | 完整游戏规则定义 (v0.9.1) |
| 项目计划 | `docs/PROJECT_PLAN.md` | 30天计划+里程碑 |
| 历史文档 | `docs/archive/` | 已归档（设计、审计、模拟报告等） |

---

## 当前进度

**Day 1** (2026-01-30): 项目规划 + PRD初稿 ✅
**Day 2** (2026-02-01): PRD完善至v0.8 + 规则审计 ✅
**Day 3** (2026-02-03): 三人战斗模拟测试 + AI策略设计 ✅
**Day 4** (2026-02-05): 模拟报告遗留问题确认 + PixelLab配置 ✅
**Day 5** (2026-02-06): 弓箭手+骑士素材生成，三角色完成 ✅
**Day 6** (2026-02-07): 素材整理 + VFX需求 + PixiJS项目初始化 ✅
**Day 7-8** (2026-02-07~08): UI设计原型 + 第三方审计 + 文档修复 ✅
**Day 9** (2026-02-08): M2战斗引擎完成（18文件，2832行） ✅
**Day 10** (2026-02-09): M2浏览器验证通过，里程碑完成 ✅
**Day 11** (2026-02-09): M3完成 — UI+特效+完整游戏流程+战斗UI重做 ✅

**已完成**:
- [x] M1: PRD v0.9.1 + 3角色素材 + PixiJS框架 + UI原型 + 审计
- [x] M2: 战斗引擎（18文件，2832行）+ 浏览器验证
- [x] M3: 交互界面+动画+特效+完整游戏流程（38文件，4053行新增）
  - Tween动画系统 + SceneManager (fade转场)
  - 战斗UI: ResourceBars, FighterHUD, RoundInfoBar, BattleLog(每行着色)
  - PixiJS ActionPanel (固定底部面板, 技能按钮, 点击精灵选目标)
  - BattleDirector async/await编排 + 技能名称浮动标签
  - P0+P1特效: 伤害飘字/斩击/箭矢/防御/顶盾/反震/箭雨/死亡/冲锋/马鞭
  - 战场背景 + 5个完整场景 (Title→PlayerCount→CharSelect→Battle→Result)

**下次继续**:
1. M4: 测试 + 打磨 + UI美化 + 部署发布
2. UI视觉提升（当前UI功能完整但美感不足）
3. 平衡性微调（骑士胜率偏高）

---

## 里程碑

| 里程碑 | 日期 | 状态 |
|--------|------|------|
| M1: PRD+素材+框架 | Day 7 | ✅ 完成 |
| M2: 战斗系统+基础画面 | Day 14 | ✅ Day 10 完成（提前4天） |
| M3: 交互界面+动画+特效 | Day 21 | ✅ Day 11 完成（提前10天） |
| M4: 1.0版本发布 | Day 30 | 待开始 |

---

## 技术架构

```
src/
├── core/           # 纯逻辑层（无PixiJS依赖）
│   ├── types.ts, BattleManager.ts, ActionResolver.ts
│   ├── DamageCalculator.ts, StatusEffectManager.ts
│   └── EventBus.ts, AIPlayer.ts, BattleFactory.ts
├── skills/         # 18个技能定义
├── characters/     # 3角色属性定义
└── game/           # PixiJS渲染层
    ├── AssetLoader.ts, SceneManager.ts, BattleDirector.ts
    ├── entities/CharacterSprite.ts
    ├── scenes/     # 5个场景
    ├── ui/         # UI组件 (ActionPanel, BattleLog, FighterHUD等)
    ├── effects/    # 11个特效类
    └── animation/  # Tween系统
```

---

## PRD状态

**版本**: v0.9.1 | **状态**: 战斗引擎已实现，规则完备 ✅

---

## 快速开始下次对话

> "继续游戏项目，开始M4"

或

> "继续游戏项目，查看当前进度"
